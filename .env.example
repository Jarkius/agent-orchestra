# Embedding Provider Configuration
# ================================
# Provider: "transformers" (Transformers.js)
EMBEDDING_PROVIDER=transformers

# Model name
# Available models:
#   - multilingual-e5-base (768 dims, default, best multilingual/Thai)
#   - bge-m3 (1024 dims, recommended for code, 8192 token context)
#   - nomic-embed-text-v1.5 (768 dims, Matryoshka support)
#   - bge-small-en-v1.5 (384 dims, fast)
#   - all-minilm-l6-v2 (384 dims, classic)
# Note: Changing models requires reindex: bun memory reindex
EMBEDDING_MODEL=bge-m3

# Optional: Custom dimensions (for Matryoshka truncation with nomic)
# EMBEDDING_DIMS=384

# Batch size for bulk embedding operations
EMBEDDING_BATCH_SIZE=32

# Optional: Model cache directory
# EMBEDDING_CACHE_DIR=~/.cache/embeddings

# ChromaDB Configuration (Server Mode - Recommended)
# ==================================================
# Running ChromaDB as a server prevents corruption from concurrent agent access.
# The spawn script automatically starts ChromaDB via Docker if available.
#
# Manual start: docker run -d -p 8100:8000 -v ./chroma_data:/data chromadb/chroma
# Or: chroma run --path ./chroma_data --port 8100
#
CHROMA_URL=http://localhost:8100
CHROMA_PORT=8100
CHROMA_CONTAINER=chromadb

# Skip vector DB initialization (useful for testing without ChromaDB)
# SKIP_VECTORDB=true

# Vector DB Resilience Settings (built-in, no config needed)
# ==========================================================
# - Write queue: All writes are serialized (concurrency=1) to prevent race conditions
# - Circuit breaker: After 3 consecutive failures, writes fast-fail for 60 seconds
# - Operation timeout: 5 seconds per operation (prevents indefinite hangs)
# - Graceful degradation: SQLite is source of truth, vector index can be rebuilt
